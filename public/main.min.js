(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,d){var g=(new Date).getTime(),c=Math.max(0,16-(g-a)),f=window.setTimeout(function(){b(g+c)},c);a=g+c;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"document"in self&&("classList"in document.createElement("_")?function(){var a=document.createElement("_");a.classList.add("c1","c2");if(!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,e=arguments.length;for(c=0;c<e;c++)a=arguments[c],b.call(this,a)}};b("add");b("remove")}a.classList.toggle("c3",!1);if(a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&
!this.contains(a)===!b?b:c.call(this,a)}}a=null}():function(a){if("Element"in a){a=a.Element.prototype;var b=Object,c=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},e=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},d=function(a,b){this.name=a;this.code=DOMException[a];this.message=b},g=function(a,b){if(""===b)throw new d("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new d("INVALID_CHARACTER_ERR",
"String contains an invalid character");return e.call(a,b)},k=function(a){for(var b=c.call(a.getAttribute("class")||""),b=b?b.split(/\s+/):[],d=0,g=b.length;d<g;d++)this.push(b[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},f=k.prototype=[],l=function(){return new k(this)};d.prototype=Error.prototype;f.item=function(a){return this[a]||null};f.contains=function(a){return-1!==g(this,a+"")};f.add=function(){var a=arguments,b=0,c=a.length,d,e=!1;do d=a[b]+"",-1===g(this,
d)&&(this.push(d),e=!0);while(++b<c);e&&this._updateClassName()};f.remove=function(){var a=arguments,b=0,d=a.length,c,e=!1,f;do for(c=a[b]+"",f=g(this,c);-1!==f;)this.splice(f,1),e=!0,f=g(this,c);while(++b<d);e&&this._updateClassName()};f.toggle=function(a,b){a+="";var c=this.contains(a),d=c?!0!==b&&"remove":!1!==b&&"add";if(d)this[d](a);return!0===b||!1===b?b:!c};f.toString=function(){return this.join(" ")};if(b.defineProperty){f={get:l,enumerable:!0,configurable:!0};try{b.defineProperty(a,"classList",
f)}catch(h){-2146823252===h.number&&(f.enumerable=!1,b.defineProperty(a,"classList",f))}}else b.prototype.__defineGetter__&&a.__defineGetter__("classList",l)}}(self));var ready=function(){function a(){if(!d.isReady){try{document.documentElement.doScroll("left")}catch(b){setTimeout(a,1);return}d.ready()}}var b,c,e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},d={isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(!0===a&&!--d.readyWait||!0!==a&&!d.isReady){if(!document.body)return setTimeout(d.ready,
1);d.isReady=!0;!0!==a&&0<--d.readyWait||b.resolveWith(document,[d])}},bindReady:function(){if(!b){b=d._Deferred();if("complete"===document.readyState)return setTimeout(d.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",d.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",c);window.attachEvent("onload",d.ready);var g=!1;try{g=null==window.frameElement}catch(e){}document.documentElement.doScroll&&
g&&a()}}},_Deferred:function(){var a=[],b,c,e,h={done:function(){if(!e){var c=arguments,f,r,n,q,p;b&&(p=b,b=0);f=0;for(r=c.length;f<r;f++)n=c[f],q=d.type(n),"array"===q?h.done.apply(h,n):"function"===q&&a.push(n);p&&h.resolveWith(p[0],p[1])}return this},resolveWith:function(d,h){if(!e&&!b&&!c){h=h||[];c=1;try{for(;a[0];)a.shift().apply(d,h)}finally{b=[d,h],c=0}}return this},resolve:function(){h.resolveWith(this,arguments);return this},isResolved:function(){return!(!c&&!b)},cancel:function(){e=1;a=
[];return this}};return h},type:function(a){return null==a?String(a):e[Object.prototype.toString.call(a)]||"object"}};document.addEventListener?c=function(){document.removeEventListener("DOMContentLoaded",c,!1);d.ready()}:document.attachEvent&&(c=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",c),d.ready())});return function(a){d.bindReady();d.type(a);b.done(a)}}();Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,e;if(null==this)throw new TypeError(" this is null or not defined");var d=Object(this),g=d.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(c=b);for(e=0;e<g;){var k;e in d&&(k=d[e],a.call(c,k,e,d));e++}});
Array.from||(Array.from=function(){var a=Object.prototype.toString,b=function(b){return"function"===typeof b||"[object Function]"===a.call(b)},c=Math.pow(2,53)-1;return function(a){var d=Object(a);if(null==a)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g=1<arguments.length?arguments[1]:void 0,k;if("undefined"!==typeof g){if(!b(g))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(k=arguments[2])}var f;
f=Number(d.length);f=isNaN(f)?0:0!==f&&isFinite(f)?(0<f?1:-1)*Math.floor(Math.abs(f)):f;f=Math.min(Math.max(f,0),c);for(var l=b(this)?Object(new this(f)):Array(f),h=0,m;h<f;)m=d[h],l[h]=g?"undefined"===typeof k?g(m,h):g.call(k,m,h):m,h+=1;l.length=f;return l}}());Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),e=c.length;return function(d){if("object"!==typeof d&&("function"!==typeof d||null===d))throw new TypeError("Object.keys called on non-object");var g=[],k;for(k in d)a.call(d,k)&&g.push(k);if(b)for(k=0;k<e;k++)a.call(d,c[k])&&g.push(c[k]);return g}}());var cuiffo=cuiffo||{};cuiffo.math=cuiffo.math||{};cuiffo.math.easeOutQuad=function(a,b,c,e){a/=e;return-c*a*(a-2)+b};cuiffo.math.easeInOutQuad=function(a,b,c,e){a/=e/2;if(1>a)return c/2*a*a+b;a--;return-c/2*(a*(a-2)-1)+b};cuiffo.math.Rect=function(a,b){this.height=a;this.width=b};cuiffo=cuiffo||{};cuiffo.dom=cuiffo.dom||{};cuiffo.dom.getScrollPosition=function(){return document.documentElement.scrollTop||document.body.scrollTop};cuiffo.dom.getWindowHeight=function(){return window.innerHeight};cuiffo.dom.getWindowWidth=function(){return window.innerWidth};cuiffo.dom.getSize=function(a){return a&&a.getBoundingClientRect()};cuiffo.dom.setCssTransform=function(a,b){a.style.webkitTransform=b;a.style.MozTransform=b;a.style.msTransform=b;a.style.OTransform=b;a.style.transform=b};
cuiffo.dom.addEventListener=function(a,b,c,e){var d="on"+b;a.addEventListener?a.addEventListener(b,c,e):a.attachEvent(d,c)};cuiffo=cuiffo||{};
(function(){cuiffo.Animator=function(){this.callbacks={};this.isTicking=!1};cuiffo.Animator.getInstance=function(){cuiffo.Animator.__instance__=cuiffo.Animator.__instance__||new cuiffo.Animator;return cuiffo.Animator.__instance__};cuiffo.Animator.prototype.startAnimation=function(a,b){this.callbacks[b]=a;this.isTicking||(this.isTicking=!0,window.requestAnimationFrame(this.tick.bind(this)))};cuiffo.Animator.prototype.cancelAnimation=function(a){delete this.callbacks[a]};cuiffo.Animator.prototype.tick=function(){var a=
(new Date).getTime(),b;for(b in this.callbacks)(0,this.callbacks[b])(a)&&this.cancelAnimation(b);Object.keys(this.callbacks).length?window.requestAnimationFrame(this.tick.bind(this)):this.isTicking=!1}})();cuiffo=cuiffo||{};cuiffo.Buttons=function(){this.buttons=[]};cuiffo.Buttons.getInstance=function(){cuiffo.Buttons.__instance__=cuiffo.Buttons.__instance__||new cuiffo.Buttons;return cuiffo.Buttons.__instance__};
cuiffo.Buttons.prototype.addButton=function(a,b){var c=this.handleTouchStart.bind(this,a),e=this.handleTouchMove.bind(this,a),d=this.handleTouchEnd.bind(this,a,b),g=this.handleClick.bind(this,b);cuiffo.dom.addEventListener(a,"touchstart",c,!1);cuiffo.dom.addEventListener(a,"touchmove",e,!1);cuiffo.dom.addEventListener(a,"touchend",d,!1);cuiffo.dom.addEventListener(a,"click",g,!1)};cuiffo.Buttons.prototype.handleTouchStart=function(a){this.touched=a};
cuiffo.Buttons.prototype.handleTouchMove=function(a){this.touched=null};cuiffo.Buttons.prototype.handleTouchEnd=function(a,b){this.touched==a&&b()};cuiffo.Buttons.prototype.handleClick=function(a){a()};cuiffo=cuiffo||{};
(function(){cuiffo.TitleAnimation=function(){this.HASH="titleAnimationHash";this.TEXT_ANIM_DURATION=200;this.lastStartPosition=this.easeEndPosition=this.easeStartPosition=this.textAnimEndTime=0};cuiffo.TitleAnimation.getInstance=function(){cuiffo.TitleAnimation.__instance__=cuiffo.TitleAnimation.__instance__||new cuiffo.TitleAnimation;return cuiffo.TitleAnimation.__instance__};cuiffo.TitleAnimation.prototype.handleScroll=function(){var a=cuiffo.Animator.getInstance();a.cancelAnimation(this.HASH);this.easeStartPosition=
this.lastStartPosition;this.textAnimEndTime=(new Date).getTime()+this.TEXT_ANIM_DURATION;var b=document.getElementsByClassName("cuiffo-page-title-container")[0].clientHeight+30;this.easeEndPosition=cuiffo.dom.getScrollPosition()/cuiffo.dom.getWindowHeight()*b;b=this.textAnimationFn.bind(this);a.startAnimation(b,this.HASH)};cuiffo.TitleAnimation.prototype.textAnimationFn=function(a){var b=!1;a>this.textAnimEndTime?(this.lastStartPosition=this.easeEndPosition,b=!0):this.lastStartPosition=cuiffo.math.easeOutQuad(Math.max(a-
(this.textAnimEndTime-this.TEXT_ANIM_DURATION),20),this.easeStartPosition,this.easeEndPosition-this.easeStartPosition,this.TEXT_ANIM_DURATION);a=document.getElementsByClassName("cuiffo-page-title-container")[0];a.style.opacity=Math.max(1-this.lastStartPosition/(a.clientHeight+30),0);cuiffo.dom.setCssTransform(a,"translateY("+this.lastStartPosition+"px)");return b}})();cuiffo=cuiffo||{};
(function(){cuiffo.PageAnimation=function(){this.HASH="pageAnimationHash";this.SCROLL_ANIM_DURATION=500;this.lastStartScroll=this.easeScrollPositionEnd=this.easeScrollPositionStart=this.easeScrollEndTime=0;this.isAnimating=!1;this.animatorHash=-1};cuiffo.PageAnimation.getInstance=function(){cuiffo.PageAnimation.__instance__=cuiffo.PageAnimation.__instance__||new cuiffo.PageAnimation;return cuiffo.PageAnimation.__instance__};cuiffo.PageAnimation.prototype.scrollToElement=function(a){var b=cuiffo.Animator.getInstance();
b.cancelAnimation(this.HASH);this.easeScrollPositionEnd=a.offsetTop;this.easeScrollEndTime=(new Date).getTime()+this.SCROLL_ANIM_DURATION;this.lastStartScroll=this.easeScrollPositionStart=a=cuiffo.dom.getScrollPosition();a=this.pageAnimationFn.bind(this);b.startAnimation(a,this.HASH);this.isAnimating=!0};cuiffo.PageAnimation.prototype.pageAnimationFn=function(a){var b=!1;a>this.easeScrollEndTime?(this.lastStartScroll=this.easeScrollPositionEnd,cuiffo.TitleAnimation.getInstance().handleScroll(),cuiffo.Pages.getInstance().updateActivePage(),
b=!0,this.isAnimating=!1):this.lastStartScroll=cuiffo.math.easeInOutQuad(a-(this.easeScrollEndTime-this.SCROLL_ANIM_DURATION),this.easeScrollPositionStart,this.easeScrollPositionEnd-this.easeScrollPositionStart,this.SCROLL_ANIM_DURATION);window.scrollTo(0,this.lastStartScroll);return b}})();cuiffo=cuiffo||{};
(function(){cuiffo.Pages=function(){this.elements=Array.from(document.getElementsByClassName("cuiffo-page"));this.numPages=this.elements.length;this.currentPage=0;this.yDown=this.xDown=null;this.activePage=-1;this.headingToPage=null;var a=this.handleTouchStart.bind(this),b=this.handleTouchMove.bind(this);cuiffo.dom.addEventListener(document,"touchstart",a,!1);cuiffo.dom.addEventListener(document,"touchmove",b,!1);this.createPageDots()};cuiffo.Pages.getInstance=function(){cuiffo.Pages.__instance__=cuiffo.Pages.__instance__||
new cuiffo.Pages;return cuiffo.Pages.__instance__};cuiffo.Pages.prototype.resizePages=function(){this.elements.forEach(function(a){a.style.height=cuiffo.dom.getWindowHeight()+"px"})};cuiffo.Pages.prototype.createPageDots=function(){for(var a=document.getElementsByClassName("cuiffo-page-selector")[0],b=0;b<this.numPages;b++){var c=document.createElement("div");c.className+=" cuiffo-page-dot";a.appendChild(c);cuiffo.dom.addEventListener(c,"click",this.handleDotClick(this.elements[b]))}};cuiffo.Pages.prototype.handleDotClick=
function(a){return function(){cuiffo.PageAnimation.getInstance().scrollToElement(a)}};cuiffo.Pages.prototype.handleTouchStart=function(a){this.xDown=a.touches[0].clientX;this.yDown=a.touches[0].clientY;a.preventDefault()};cuiffo.Pages.prototype.handleTouchMove=function(a){a.preventDefault();if(!this.xDown||!this.yDown)return!1;var b=this.yDown-a.touches[0].clientY;Math.abs(this.xDown-a.touches[0].clientX)<Math.abs(b)&&(10<b?(a=Math.min(this.activePage+1,this.numPages-1),this.scrollToPage(a)):-10>
b&&(a=Math.max(this.activePage-1,0),this.scrollToPage(a)));return!1};cuiffo.Pages.prototype.scrollToPage=function(a){cuiffo.PageAnimation.getInstance().scrollToElement(this.elements[a]);this.updateActivePage();this.yDown=this.xDown=null;this.headingToPage=a};cuiffo.Pages.prototype.updateActivePage=function(){var a=document.getElementsByClassName("cuiffo-page-dot"),b=cuiffo.dom.getScrollPosition()/cuiffo.dom.getWindowHeight();this.activePage=Math.min(Math.round(b),this.numPages-1);a[this.activePage].classList.add("cuiffo-page-dot-active");
for(b=0;b<this.numPages;b++)this.activePage!==b&&a[b].classList.remove("cuiffo-page-dot-active")}})();var cuiffo=cuiffo||{},origSplashSize,origComingSoonSize,origCheckLaterSize,positionInPage,placeInfoTiles=function(){var a=cuiffo.dom.getWindowWidth(),b=cuiffo.dom.getWindowHeight(),c=document.getElementsByClassName("cuiffo-map-container")[0],e=document.getElementsByClassName("cuiffo-map-sidebar")[0];b>a?(c.classList.add("cuiffo-map-container-tall"),e.classList.add("cuiffo-map-sidebar-tall")):(c.classList.remove("cuiffo-map-container-tall"),e.classList.remove("cuiffo-map-sidebar-tall"))},handleResize=
function(){var a=document.getElementsByClassName("cuiffo-page-title")[0],b=document.getElementsByClassName("cuiffo-page-cented-text")[0],c=document.getElementsByClassName("cuiffo-more-coming-soon")[0],e=document.getElementsByClassName("cuiffo-check-back-later")[0],d=100,d=Math.min(550,Math.max(cuiffo.dom.getWindowWidth()-20,d)),g=d/origSplashSize.width;a.style.fontSize=100*g+"%";splashHeight=a.clientHeight;d=100;d=Math.min(550,Math.max(cuiffo.dom.getWindowWidth()-20,d));g=d/origComingSoonSize.width;
c.style.fontSize=90*g+"%";g=d/origCheckLaterSize.width;e.style.fontSize=90*g+"%";a=b.clientHeight;b.style.top=cuiffo.dom.getWindowHeight()/2-a/2+"px";b=cuiffo.Pages.getInstance();b.resizePages();b.headingToPage&&b.scrollToPage(headingToPage);placeInfoTiles()},handleScroll=function(a){if(cuiffo.PageAnimation.getInstance().isAnimating)return a.preventDefault(),!1;positionInPage=cuiffo.dom.getScrollPosition();cuiffo.TitleAnimation.getInstance().handleScroll();cuiffo.Pages.getInstance().updateActivePage()},
initButtons=function(){var a=cuiffo.Buttons.getInstance(),b=document.getElementsByClassName("cuiffo-map-venue-info")[0];a.addButton(b,function(){window.open("http://palacesomersetpark.com/","_blank")});b=document.getElementsByClassName("cuiffo-map-hotel-info")[0];a.addButton(b,function(){window.open("http://www.sonesta.com/somerset","_blank")})},init=function(){var a=document.getElementsByClassName("cuiffo-page-title-container")[0],b=document.getElementsByClassName("cuiffo-page-title")[0],c=document.getElementsByClassName("cuiffo-more-coming-soon")[0],
e=document.getElementsByClassName("cuiffo-check-back-later")[0],d=document.getElementsByClassName("cuiffo-page-cented-text")[0];origSplashSize=cuiffo.dom.getSize(b);origComingSoonSize=cuiffo.dom.getSize(c);origCheckLaterSize=cuiffo.dom.getSize(e);a.style.width="100%";b.style.width="100%";d.style.width="100%";cuiffo.Pages.getInstance();cuiffo.dom.addEventListener(window,"resize",handleResize);cuiffo.dom.addEventListener(window,"scroll",handleScroll);handleResize();handleScroll();initButtons()};ready(init);
